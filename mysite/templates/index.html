{% extends "sitebase.html" %}
{% load group_check %}

{% block extra_script %}
  <script type="text/javascript">
  $(document).ready(function() {
    $('#francemap').vectorMap({
        map: 'france_fr',
      hoverOpacity: 0.5,
      hoverColor: "#EC0000",
      backgroundColor: "#ffffff",
      color: "rgba(18, 127, 182, 0.4)",
      borderColor: "#000000",
      selectedColor: "#08C",
      enableZoom: false,
      showTooltip: true,
        onRegionClick: function(element, code, region)
        {
            // var message = 'Région : "'+ region + '" || Id : "'+ code + '"';

          var dict = {
                region:        code,
                category:     'all',
                offer:        'all',
                low_salary:   'all',
                high_salary:  'all',
                csrfToken :   $('input[name="csrfmiddlewaretoken"]').val()
                };

                var query_string = $.param( dict, true );
                window.location.href = '/map_search/?'+query_string;
            
        }
    });
  });
  </script>
{% endblock extra_script %}

{% load dajaxice_templatetags %}

{% load i18n %}

    {% block middlecontent %}

    <div class="col-sm-8">

      <br/>
    
    <div id="respo">

      <!-- test ineractive map --> 
      <div class="panel panel-default">
        <div class="panel-heading">
          Recherche par région
        </div>

        <div class="panel-body">
          <div id="francemap" style="width: 300px; height: 300px; margin-left: 25%;"></div>
        </div>
      </div>
      <!-- test ineractive map ends --> 

      <div class="panel panel-default">
     <div class="panel-heading"> {% trans "Les Dernieres offres" %} </div>
     <div class="panel-body-mod">

        {% for i in cars %}
        <div class="freelancer-list-item hoverable clearfix">
            <a class="span-2 freelancer-image" href="#">
              <img width="70" height="70" src="http://placehold.it/70x70" alt="Sando">
            </a>

          <div class="span-70 boxmodelfix info">
              <h3>
                  <a class="freelancer left" rel="nofollow" href="#">{{i.title}}</a>
                  <!-- <span class="cert cert-level1-small " data-level="1"> </span> --> 
                  <div class="widget-member-prizes"></div>       
              </h3>

              <div class="job-title crop span-10">
                {{ i.category_display }} | <strong>{{i.region_display}}</strong> | <span class="clock"> <span> {{i.created|date:"M-d"}} </span> </span>
              </div>

              <ul class="horizontal left">
                  <li>
                      <span class="flag"> Nombre de vues </span>
                  </li>

                  <li class="rating"> {{i.views}} </li>

                  </ul>
              </div>

              <div class="span-3 last details freelancer">

               <a class="span-3 contact-member call-to-action button action-signup-show" rel="nofollow" href="/">
                Contact
              </a>  
             </div>
      </div>

      {% endfor %}

     </div>
   </div>
      
    </div>
    
    <div class="clearfix"></div>  
   
   
    <!-- carousel events --> 

   <div class="panel panel-default">
     <div class="panel-body">
       <div class="col-sm-12">
         <img src="http://placehold.it/670x70&text=espace de publicite" alt="placeholder image" class='img-responsive'>
       </div>
     </div>
   </div>
      
    </div> <!-- end span8 -->
      
    {% endblock middlecontent %}

    <br/>

  {% block extra_js %}

    <script type="text/javascript">

      $(document).ready(function(){
      /* Flex image slider */
         $('.flex-image').flexslider({
            direction: "vertical",
            controlNav: false,
            directionNav: true,
            pauseOnHover: true,
            slideshowSpeed: 10000      
         });
      /* Flexslider for product images */
         $('.product-image-slider').flexslider({
            direction: "vertical",
            controlNav: false,
            directionNav: true,
            pauseOnHover: true,
            slideshowSpeed: 10000,
         });
      });
    </script>

     <script type="text/javascript">
          $(document).ready(function(){

            $('#carousel ul').carouFredSel({
              prev: '#prev',
              next: '#next',
              pagination: "#pager",
              scroll: 1,
              // auto: false,
              responsive: true,
              duration: 2000,
              items: 3
            });

          });
        </script>

        <script type="text/javascript">
          $(document).ready(function(){

            $('#carousel2 ul').carouFredSel({
              prev: '#prev2',
              next: '#next2',
              pagination: "#pager2",
              // height: '100%',
              auto: false,
              duration: 3000,

              responsive: true,
              direction: 'up',
              scroll: 1,
              items: 5,
              scroll : {
                items : 1,
              },
              items: {
              width: "100%",
              height: '100%',
              visible: {
                min: 5,
                max: 5
                  }
                }
            });

          });
        </script>

    <script>$(".mobile").click(function() {
      $("nav").slideToggle();  
    });

    var menu = $("nav");
    jQuery(window).on('resize', function(){     
        if(!jQuery(".mobile").is(":visible") && !menu.is(':visible'))
        {
            menu.css({'display':''});   
        }
    });//@ sourceURL=pen.js
    </script>

    <script>
      $(window).bind("load resize slid.bs.carousel", function() {
      var imageHeight = $(".active .holder").height();
      $(".controllers").height( imageHeight );
      console.log("Slid");
    });
    </script>

{% endblock extra_js %}      



